chrome.runtime.onMessage.addListener(function(a,b,c){a.webToPhoneJSTestMessage&&c({content_script_exists:!0});if(a.contextMenuInfo){var d=a.contextMenuInfo;chrome.runtime.sendMessage({getPathToLatestCutOfWebApp:!0},function(b){b=b.path_to_latest_webapp;a.bypassOptionsModal?(_384bb4e4d1df1fce7d30cfbdb556a4e9213bad6c(d,a.bypassOptionsModal,a.task,b),c({receivedInfo:!0,bypassingOptionsModal:!0})):(_384bb4e4d1df1fce7d30cfbdb556a4e9213bad6c(d,null,null,b),c({receivedInfo:!0,bypassingOptionsModal:!1}))});
c({contextMenuInfoReceived:!0})}else a.sendC2DMStatus&&(a.response_status?_532183230f0a13627a3910ebff66cfa0df6b4177(!0):_532183230f0a13627a3910ebff66cfa0df6b4177(!1,chrome.i18n.getMessage("unable_to_comm_with_phone")),c({successAcknowledged:!0}))});
function _46c9fd6e14c79fa19710de71df4286e2399b462a(a){var b=chrome.extension.getURL("img/128x128_MT_logo_boom_gradient_white.png"),c=chrome.extension.getURL("../img/web-to-phone/send_to_phone3.png"),d=chrome.extension.getURL("../img/web-to-phone/send_pic_message7.png"),e=chrome.extension.getURL("img/web-to-phone/remove.png");a='<div class="imgTaskSelect mtOverLay" data-context="'+a+'"><div class="linkPreview"><div class="linkPreviewImg">';a+='<img src="'+b+'"/>';a+="</div>";a+='<div class="linkPreviewBody">';
a+='<div class="linkPreviewTitle"></div>';a+='<div class="linkPreviewURL"></div>';a+="</div>";a+="</div>";a+='<div class="mightyWrapper">';a+='<div class="task mightyClearfix" data-task="sendWebContentToPhone">';a+='<img src="'+c+'"/>';a+='<div class="webImgPlaceHolder">';a+='<img src="" />';a+='<div class="selectHolder"></div>';a+="</div>";a+='<div class="taskCaption"></div>';a+="</div>";a+='<div class="task mightyClearfix" data-task="sendMessage">';a+='<img src="'+d+'"/>';a+='<div class="webImgPlaceHolder">';
a+='<img src=""/>';a+='<div class="selectHolder"></div>';a+="</div>";a+='<div class="taskCaption"></div>';a+="</div>";a+="</div>";a+='<img id="removeMightyOverlay" src="'+e+'" alt="removeButton"/>';return a+="</div>"}
function _384bb4e4d1df1fce7d30cfbdb556a4e9213bad6c(a,b,c,d){var e=a.context,f=chrome.extension.getURL("../img/web-to-phone/loading.gif"),n=chrome.extension.getURL("img/web-to-phone/send_link_to_phone3.png"),p=chrome.extension.getURL("../img/web-to-phone/send_to_phone3.png"),q=chrome.extension.getURL("img/web-to-phone/send_link_message4.png"),r=chrome.extension.getURL("../img/web-to-phone/send_pic_message7.png"),t=chrome.extension.getURL("img/web-to-phone/send_selection_to_phone.png"),u=chrome.extension.getURL("img/web-to-phone/send_selected_text.png"),
g=$(".mightyWidgetWrapper");$(g).remove();d=_ef0c8bfeb849e760905871acb8a58503833be755(a,e,c,d);var f='<div class="mightyWidgetWrapper mtOverLay"><div class="mightyWidgetContainer"><i class="fa fa-check-circle" style="visibility:hidden;position:absolute;top:0px;left:0px;"></i>'+('<div class="mightyComposeWidgetLoadingSpinnerWrapper"><img class="mightyComposeWidgetLoadingSpinner" src="'+f+'"/></div><div class="sendc2dmNotifWrapper"><a class="sendc2dmNotif"><i class="fa fa-check-circle mightyCheckMark"></i> <span id="notifText"></span></a></div></div></div>'),
v=_46c9fd6e14c79fa19710de71df4286e2399b462a(e),g="web-content",l="context-menu";"composeNew"==c?(g="compose-new",l="popup-menu"):"sendMessage"==c&&(l="popup-menu");var m='<iframe scrolling="no" id="mightyIframeWidget" src="'+d+'" data-intent="'+g+'" data-web-content-type="'+e+'" data-widget-action-origin="'+l+'" ></iframe>';$(f).appendTo("body").each(function(){var d=$(this).find(".mightyWidgetContainer");"link"!=e&&"image"!=e&&"selection"!=e||$(v).appendTo(d).each(function(){var d;if(b)if("sendToPhone"==
c)_fe291410d3f370e837b7accbdc453ecb9bcb9f5b(this,a,e,"popup-menu"),d=chrome.i18n.getMessage("open_link_on_phone_success");else{if("sendMessage"==c||"composeNew"==c)"composeNew"==c&&(e="compose-new",$("#mightyIframeWidget").attr("data-web-content-type","compose-new")),_f7947878671eba3e2e712366499da3e0587e1f10(this,m,$(this).parent(),e,"popup-menu",a)}else{var f,g,h,k;_6d99b9b5a9c6f0dd1fe5a890c894223362bf4d0c(this,e,m,a);"link"==e?(f=q,g=n,h=chrome.i18n.getMessage("send_link_as_text"),k=chrome.i18n.getMessage("open_link_on_phone"),
d=chrome.i18n.getMessage("open_link_on_phone_success"),$(".linkPreview").show(),$(".linkPreviewTitle").text(a.tab.title).dotdotdot({ellipsis:"...",height:null}),$(".linkPreviewURL").text(a.info.pageUrl).dotdotdot({ellipsis:"...",height:null}),_a5ef4fd4ab6bac6bae48dd6d0d832ae9f135a21b(a.tab)):"image"==e?($(".linkPreview, .linkPreviewSMS, .selectHolder").hide(),f=r,g=p,h=chrome.i18n.getMessage("send_img_as_mms"),k=chrome.i18n.getMessage("send_img_to_phone"),d=chrome.i18n.getMessage("send_img_to_phone_success"),
$("div.task > .webImgPlaceHolder").show().find("img").attr("src",a.info.srcUrl)):"selection"==e&&($(".linkPreview, .linkPreviewSMS").hide(),f=u,g=t,h=chrome.i18n.getMessage("send_select_to_phone_as_text"),k=chrome.i18n.getMessage("send_select_to_phone"),d=chrome.i18n.getMessage("send_select_to_phone_success"),$(".webImgPlaceHolder").find("img").hide(),$(".webImgPlaceHolder").show().find(".selectHolder").text('"'+a.info.selectionText+'"').dotdotdot({ellipsis:'..."',height:null}));$("div[data-task='sendMessage'] .taskCaption").text(h);
$("div[data-task='sendWebContentToPhone'] .taskCaption").text(k);$("div[data-task='sendMessage'] > img").attr("src",f);$("div[data-task='sendWebContentToPhone'] > img").attr("src",g)}"link"==e&&(f=_9902a0517334fa81e6a3e61140339023f045b7b1(a.tab.url),0!=f&&(d=_f958103041b4f685a7d989397a958079446fca6a(f),_76bb23d324b8522de03187432986e4fff0ff62e8(f)));$("#notifText").text(d)})})}
function _ef0c8bfeb849e760905871acb8a58503833be755(a,b,c,d){d="https://mightytext.net/"+d+"/#mode=compose-new&view=iframe";if("link"==b||"selection"==b){var e,f="";"composeNew"!=c&&("link"==b?(e=a.tab.title,400<e.length&&(e=e.substring(0,396)+"...")):"selection"==b&&(e=a.info.selectionText,1E3<e.length&&(e=e.substring(0,396)+"...")),f=f+('"'+e+'"')+(" - "+a.info.shortUrl),f+=" - "+chrome.i18n.getMessage("sent_with_mt")+" (mightytext.net/R1)");if(1500>f.length)a=_855a19b21ec568fa8351b9822e40b31473bb429c(f),
d+="&body="+a+"&type=sms";else return alert(chrome.i18n.getMessage("select_too_long")),!1}else"image"==b?(a=_855a19b21ec568fa8351b9822e40b31473bb429c(a.info.srcUrl),f=_855a19b21ec568fa8351b9822e40b31473bb429c("- "+chrome.i18n.getMessage("sent_with_mt")+" (mightytext.net/R1)"),d+="&body="+f+"&type=mms&binarysrc="+a):alert(chrome.i18n.getMessage("gen_context_menu_error"));return d}
function _6d99b9b5a9c6f0dd1fe5a890c894223362bf4d0c(a,b,c,d){var e=$(a).parent(),f=$(a).find("#removeMightyOverlay");console.log(d);$(a).fadeIn();$(".imgTaskSelect").on("click",function(a){a.stopPropagation()});$(".mightyWidgetWrapper").not(".imgTaskSelect").on("click",function(a){console.log(a);if("mightyIframeWidget"==$(a.target).attr("id"))return!1;_7256291f9cf18451d35fefabe6858c256485a173()});$(a).find(".task").on("click",function(f){f.stopPropagation();f=$(this).attr("data-task");"sendMessage"==
f?_f7947878671eba3e2e712366499da3e0587e1f10(a,c,e,b,"context-menu",d):"sendWebContentToPhone"==f&&_fe291410d3f370e837b7accbdc453ecb9bcb9f5b(a,d,b,"context-menu")});$(f).on("click",function(a){console.log(a);_7256291f9cf18451d35fefabe6858c256485a173()})}
function _53c530b17d60b30b1de58e0eea2a470862f7045d(a){composeNewWebappTimeout=globalComposeNewWebappTimeout;"compose_new_content_load_success"==a.data?(clearTimeout(composeNewWebappTimeout),$("#mightyIframeWidget").addClass("show"),$(".mightyComposeWidgetLoadingSpinnerWrapper").remove()):"closeIframe"==a.data?_ab0ba08ac7f1cdedc078ec9fc9766954af1e4b39():"successful_sendc2dm"==a.data?(console.log(a),$("#mightyIframeWidget").fadeOut(250,function(){$(this).remove();_532183230f0a13627a3910ebff66cfa0df6b4177(!0,
chrome.i18n.getMessage("message_sent"));var a,c;"compose-new"==$(this).data("intent")?(iFrameKMEventName="CRX-Widget-Compose-New-Send",a="compose-new",c="popup-menu"):(iFrameKMEventName="CRX-Widget-Text-Web-Content-Send",a=$(this).data("web-content-type"),c=$(this).data("widget-action-origin"));_39ad02de4cf2c92b012f6526ae3f58327b310020(iFrameKMEventName,{"Content-Type":a,Client:"CRX","App-Action-Location":c})}),_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX","Sent-Message-From-Compose-New-Iframe",
"Sent")):"successful_scheduled_message"==a.data?($("#mightyIframeWidget").fadeOut(250,function(){$(this).remove();_532183230f0a13627a3910ebff66cfa0df6b4177(!0,chrome.i18n.getMessage("message_scheduled"));var a,c;"compose-new"==$(this).data("intent")?(iFrameKMEventName="CRX-Widget-Compose-New-Scheduled-Message",a="compose-new",c="popup-menu"):(iFrameKMEventName="CRX-Widget-Text-Web-Content-Scheduled-Message",a=$(this).data("web-content-type"),c=$(this).data("widget-action-origin"));_39ad02de4cf2c92b012f6526ae3f58327b310020(iFrameKMEventName,
{"Content-Type":a,Client:"CRX","App-Action-Location":c})}),_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX","Scheduled-Message-From-Compose-New-Iframe","Scheduled")):"user_draft_saved"==a.data?_dcd83791b8ac2f1b48ef2120a118232cd7314bb7(chrome.i18n.getMessage("draft_saved")+".","success"):"user_draft_updated"==a.data?_dcd83791b8ac2f1b48ef2120a118232cd7314bb7(chrome.i18n.getMessage("draft_updated")+".","success"):"user_draft_not_updated"==a.data?_dcd83791b8ac2f1b48ef2120a118232cd7314bb7(chrome.i18n.getMessage("draft_not_updated")+
".","danger"):"user_draft_not_saved"==a.data?_dcd83791b8ac2f1b48ef2120a118232cd7314bb7(chrome.i18n.getMessage("draft_not_saved")+".","danger"):"user_created_template"==a.data&&_dcd83791b8ac2f1b48ef2120a118232cd7314bb7(chrome.i18n.getMessage("template_created")+".","success")}var globalComposeNewWebappTimeout;
function _22fd9e91ce5c7452b1464803c55551ac9ad127bf(){var a=setTimeout(function(){_532183230f0a13627a3910ebff66cfa0df6b4177(!1,chrome.i18n.getMessage("unable_to_load_mt_iframe"));_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX","CRX-Widget-Iframe-Timeout");$("#mightyIframeWidget").ready(function(){});return!1},5E3);$("#mightyIframeWidget").ready(function(){$("#mightyIframeWidget").addClass("show");$(".mightyComposeWidgetLoadingSpinnerWrapper").remove();globalComposeNewWebappTimeout=setTimeout(function(){_532183230f0a13627a3910ebff66cfa0df6b4177(!1,
chrome.i18n.getMessage("unable_to_load_mt_iframe"));_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX","CRX-Widget-Iframe-Content-Timeout")},4E3);clearTimeout(a);window.addEventListener("message",_53c530b17d60b30b1de58e0eea2a470862f7045d)})}function _25a395958fff841e8cca2b6a8c6e0337f0dab41f(a){$("#mightyIframeWidget").addClass("show");$(".mightyComposeWidgetLoadingSpinnerWrapper").remove();void 0!=a&&clearTimeout(a)}
function _7256291f9cf18451d35fefabe6858c256485a173(){$(".mightyWidgetWrapper").fadeOut().remove();$.growl(!1,{command:"closeAll"})}
function _532183230f0a13627a3910ebff66cfa0df6b4177(a,b,c){$(".mightyComposeWidgetLoadingSpinner").hide();void 0!=b&&$("#notifText").text(b);1!=a&&$("#notifText").css("fontSize","21px");$(".sendc2dmNotifWrapper").fadeIn(150,function(){0!=a?$(".mightyWidgetWrapper").delay(2E3).fadeOut(250,function(){$(this).remove()}):($(".mightyCheckMark").removeClass("fa-check-circle").addClass("fa-times-circle mightyError"),$(".sendc2dmNotifWrapper").delay(2E3).fadeOut(250,function(){_ab0ba08ac7f1cdedc078ec9fc9766954af1e4b39()}))})}
function _a2a83801b3b7b21281063213dc2c680496155702(a,b){$(a).appendTo(b).each(function(){_22fd9e91ce5c7452b1464803c55551ac9ad127bf()})}
function _f7947878671eba3e2e712366499da3e0587e1f10(a,b,c,d,e,f){$(a).fadeOut();_a2a83801b3b7b21281063213dc2c680496155702(b,c[0]);_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX","Context-Menu-Click-Option","Send-As-Message");a="compose-new"==d?"CRX-Widget-Compose-New-Invoke":"CRX-Widget-Text-Web-Content-Invoke";f=_9902a0517334fa81e6a3e61140339023f045b7b1(f.tab.url);0!=f&&(d="youtube.com/watch"==f?"youtube":"yelp.com/biz"==f?"yelp":"google-maps");_39ad02de4cf2c92b012f6526ae3f58327b310020(a,{"Content-Type":d,
Client:"CRX","App-Action-Location":e});"context-menu"==e&&_39ad02de4cf2c92b012f6526ae3f58327b310020("Context-Menu-Click-Option",{"Content-Type":d,Client:"CRX","App-Action-Location":e,Action:"Send-As-Message-"+d})}
function _fe291410d3f370e837b7accbdc453ecb9bcb9f5b(a,b,c,d){if("selection"==c&&1E3<b.info.selectionText.length)return $(".imgTaskSelect").fadeOut(250,function(){_532183230f0a13627a3910ebff66cfa0df6b4177(!1,chrome.i18n.getMessage("selection_too_long"))}),!1;var e=_9902a0517334fa81e6a3e61140339023f045b7b1(b.tab.url);if(0!=e)if("youtube.com/watch"==e)c="youtube";else if("yelp.com/biz"==e)c="yelp";else if("google.com/maps"==e||"google.co.uk/maps"==e)c="google-maps";_84ddee4a4811cee9b664c8e88337b445c59d14b8("CRX",
"Context-Menu-Click-Option","Send-To-Phone-"+c);_39ad02de4cf2c92b012f6526ae3f58327b310020("Send-To-Phone",{"Content-Type":c,Client:"CRX","App-Action-Location":d});"context-menu"==d&&_39ad02de4cf2c92b012f6526ae3f58327b310020("Context-Menu-Click-Option",{"Content-Type":c,Client:"CRX",Action:"Send-To-Phone"});chrome.runtime.sendMessage({sendContentToPhone:!0,action_data:b,context:c},function(b){b=b.confirmation;b=jQuery.parseJSON(b);console.log(b);$(a).fadeOut().remove()})}
function _a5ef4fd4ab6bac6bae48dd6d0d832ae9f135a21b(a){var b=$('meta[property="og:image"]'),c=$('meta[name="og:image"]');console.log({og:b});a=0<b.length?b[0].content:0<c.length?c[0].content:a.favIconUrl;console.log(a.length);0<a.length&&$(".linkPreviewImg > img").attr("src",a)}function _9902a0517334fa81e6a3e61140339023f045b7b1(a){var b=!1;$(globalArrayOfApprovedHostsForCustomPushToPhone).each(function(c,d){-1<a.indexOf(d)&&(console.log("This is a special site!: "+d),b=d)});return b}
function _f958103041b4f685a7d989397a958079446fca6a(a){var b="";"google.com/maps"==a||"google.co.uk/maps"==a?b=chrome.i18n.getMessage("map_to_phone_success"):"youtube.com/watch"==a?b=chrome.i18n.getMessage("vid_to_phone_success"):"yelp.com/biz"==a&&(b=chrome.i18n.getMessage("yelp_to_phone_success"));return b}
function _76bb23d324b8522de03187432986e4fff0ff62e8(a){var b,c;"youtube.com/watch"==a?(b=chrome.extension.getURL("img/web-to-phone/send_video_to_phone.png"),c=chrome.i18n.getMessage("vid_to_phone")):"yelp.com/biz"==a&&(b=chrome.extension.getURL("img/web-to-phone/send_yelp_to_phone.png"),c=chrome.i18n.getMessage("yelp_to_phone"));$("div[data-task='sendWebContentToPhone'] .taskCaption").text(c);$("div[data-task='sendWebContentToPhone'] > img").attr("src",b)}
function _dcd83791b8ac2f1b48ef2120a118232cd7314bb7(a,b){$.growl(a,{type:b,z_index:99999999999,delay:6E5,template:'<div data-growl="container" class="alert mightyAlert" role="alert"><button type="button" class="close" data-growl="dismiss"><span aria-hidden="true">\u00d7</span><span class="sr-only">Close</span></button><span data-growl="icon"></span><span data-growl="title"></span><span data-growl="message"></span><a href="#" data-growl="url"></a></div>'})}
function _ab0ba08ac7f1cdedc078ec9fc9766954af1e4b39(){window.removeEventListener("message",_53c530b17d60b30b1de58e0eea2a470862f7045d,!1);$.growl(!1,{command:"closeAll"});$(".mightyWidgetWrapper").fadeOut(250,function(){$(this).remove()})};