'use strict';var Yg;m("mr.IssueSeverity",{yda:"fatal",mga:"warning",Fea:"notification"},void 0);m("mr.IssueAction",{mda:"dismiss",nea:"learn_more"},void 0);var Zg=function(a,b,c){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction=c;this.helpPageId=this.secondaryActions=null};Zg.prototype.o8=function(a){this.helpPageId=a;return this};Zg.prototype.X9=function(a){this.secondaryActions=a;return this};
Zg.prototype.u8=function(a){if(!a&&"fatal"==this.severity)throw Error("All FATAL issues must be blocking.");this.isBlocking=a;return this};var $g=function(a){this.Hb=a;this.Ml=u()},ah=B("mr.Timing");$g.prototype.Tv=function(a,b){null!=b&&(a+="_"+b);return a};$g.prototype.Cl=function(a){this.Hb=a};$g.prototype.end=function(a){var b=u()-this.Ml;bh(this.Tv(this.Hb,a),b)};var bh=function(a,b){0>b&&(D(ah,"Timing analytics event with negative time"),b=0);1E4<b&&(b=1E4);try{chrome.metricsPrivate.recordTime(a,b)}catch(c){D(ah,"Failed to record time "+b+" in "+a)}},ch=function(a){$g.call(this,a)};w(ch,$g);var dh=B("mr.MediumTiming");
ch.prototype.end=function(a){var b=u()-this.Ml;a=this.Tv(this.Hb,a);if(0>b)D(dh,"Timing analytics event with negative time");else{1E4>b&&(b=1E4);18E4<b&&(b=18E4);try{chrome.metricsPrivate.recordMediumTime(a,b)}catch(c){D(dh,"Failed to record time "+b+" in "+a)}}};var eh=function(a){$g.call(this,a)};w(eh,$g);var fh=B("mr.LongTiming");
eh.prototype.end=function(a){var b=u()-this.Ml;a=this.Tv(this.Hb,a);if(0>b)D(fh,"Timing analytics event with negative time");else{18E4>b&&(b=18E4);36E5<b&&(b=36E5);try{chrome.metricsPrivate.recordLongTime(a,b)}catch(c){D(fh,"Failed to record time "+b+" in "+a)}}};
var gh=B("mr.Analytics"),hh=function(a){try{chrome.metricsPrivate.recordUserAction(a)}catch(b){D(gh,"Failed to record event "+a)}},ih=function(a,b,c){var e,f=0,g;for(g in c)f++,c[g]==b&&(e=g);if(l(e)){c={metricName:a,type:"histogram-linear",min:1,max:f,buckets:f+1};try{chrome.metricsPrivate.recordValue(c,b)}catch(k){D(gh,"Failed to record enum value "+e+" ("+b+") in "+a,k)}}else C(gh,"Unknown analytics value, "+b+" for histogram, "+a,Error())};var jh={Tca:0,Rca:1,Vca:2,Sca:3,zca:4,Uca:5,Tda:6,Sfa:7,ida:8,QA:9},kh=function(a){ih("MediaRouter.Mirror.Capturing.Failure",a,jh)};var lh=function(){return null!=ac&&-1!=ac.indexOf("CrOS")},mh=function(){var a=ac;if(!q(a))return!1;a=a.match(/Windows NT \d+.\d+/);if(null===a||!ua(a))return!1;a=a[0];a=a.match(/\d+.\d+/);if(null===a||!ua(a))return!1;a=a[0];return 6.2<=parseFloat(a)},nh=function(){return lh()?"ChromeOS":ad?"Windows":$c?"Mac":bd?"Linux":"Other"};var oh=function(a){this.Fj=a;this.Mc=this.el=null;this.a=B("mr.mirror.MediaStream")},ph={message:"empty-stream"};d=oh.prototype;d.fL=function(a){this.el=a};d.Hv=function(){return this.Fj};d.start=function(){return this.Fj.EG()?this.xaa():this.naa()};
d.xaa=function(){var a=this.Fj.oM();E(this.a,"Starting tab capture with constraints "+JSON.stringify(a));return(new fe(function(b,c){chrome.tabCapture.capture(a,function(a){a?(this.EL(a),b(this)):c(Error(chrome.runtime.lastError&&chrome.runtime.lastError.message?chrome.runtime.lastError.message:ph))}.bind(this));af(function(){c(Error("chrome.tabCapture.capture failed to call its callback"))},5E3,this)},this)).va(function(a){this.XH(a)},this)};
d.dZ=function(a){a&&E(this.a,"Track "+JSON.stringify(a.target)+" ended");this.stop()};d.XH=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);a=this.Fj.Cu;"tab"==a&&"empty_stream"==b?kh(0):"desktop"==a&&"Error-timeout"==b?kh(1):"desktop"==a&&"Error-user_cancel"==b?kh(3):"tab"==a&&"Error-timeout"==b?kh(5):kh(9);throw Error("Failed to capture "+this.Fj.Cu);};
d.naa=function(){return(new fe(function(a,b){var c=["screen","audio"];"Linux"==nh()&&c.push("window");var e=chrome.desktopCapture.chooseDesktopMedia(c,a);af(function(){chrome.desktopCapture.cancelChooseDesktopMedia(e);b(Error("timeout"))},6E4,this)},this)).then(function(a){var b=this.Fj.oM(a);E(this.a,"Starting desktop capture with constraints "+JSON.stringify(b));return new fe(function(a,e){navigator.webkitGetUserMedia(b,a,e)})},null,this).then(function(a){if(a)this.EL(a);else throw Error(ph);return this},
null,this).va(function(a){this.XH(a)},this)};d.EL=function(a){this.Mc=a;a.getTracks().forEach(function(a){a.onended=this.dZ.bind(this)},this)};d.stop=function(){this.Mc&&(this.Mc.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.Mc=null,this.el&&this.el())};var rh=function(a){return qh(a)||"urn:x-org.chromium.media:source:desktop"==a},sh=function(a){var b=document.createElement("a");b.href=a;return"http:"!=b.protocol&&"https:"!=b.protocol?!1:-1==b.hash.indexOf("__castAppId__")},th=["https://docs.google.com"],qh=function(a){return Ea(a,"urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")};var uh=function(a){return(new fe(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var vh=chrome.i18n.getMessage("1639753794700094338");var wh=function(a,b){se.call(this);this.N6=a;this.yi=b;this.De=this.Ra=null;this.o=B("mr.mirror.Service."+a);this.Vx=t(this.bZ,this);this.mm=!1};w(wh,se);d=wh.prototype;d.getName=function(){return this.N6};d.Go=function(a,b,c,e){E(this.o,"Start mirroring on route "+a.id);return this.OC(b,a.ie.tabId).then(this.bS.bind(this,a,b,c,e))};
d.bS=function(a,b,c,e){var f=this.Wh(b,c);return this.bM().then(function(){return(new oh(f.Hv())).start()}).then(function(b){this.De=b;b.fL(t(this.el,this,b));return e?e(a):a},null,this).then(function(a){this.Ra=this.Su(f,a);return this.Ra.start(this.De.Mc)},null,this).then(function(){f.Zw()&&!chrome.tabs.onUpdated.hasListener(this.Vx)&&chrome.tabs.onUpdated.addListener(this.Vx);return this.NI(a,f,c)},null,this).va(function(a){this.mH(a);this.gf();throw a;},this)};
d.ot=function(a,b,c,e,f){E(this.o,"Update mirroring on route "+a.id);return this.OC(b,e).then(this.cS.bind(this,a,b,c,f))};d.OC=function(a,b){return qh(a)?uh(b).then(function(a){if(!a.active)throw Error("Tab to be mirrored is not active");}):G()};
d.cS=function(a,b,c,e){b=this.Wh(b,c);if(!this.Ra.gM())return H(Error("Session does not support updating stream"));var f=!1;return(new oh(b.Hv())).start().then(function(b){var c=this.De;this.De=b;b.fL(t(this.el,this,b));f=!0;c.stop();return e?e(a):a},null,this).then(function(a){this.Ra.T9(a);return this.Ra.Iba(this.De.Mc)},null,this).then(this.NI.bind(this,a,b,c)).va(function(a){this.mH(a);f&&this.gf();throw a;},this)};
d.NI=function(a,b,c){b.Zw()?this.Ra.Jba(a.ie.tabId).then(function(){this.Ra.$y();this.Cy()},function(a){C(this.o,"Failed to obtain initial tab info.",a)},this):(this.Ra.VK("Capturing Desktop","Capturing Desktop",null),this.Ra.$y(),this.yy());this.BQ(c,this.De);return this.Ra.Za};d.mH=function(a){var b="";a.name&&(b=a.name);a.message&&(b&&(b+="-"),b+=a.message);b||(b="Error-unknown");this.Ay(b)};d.el=function(a){this.De==a&&(this.By(),this.gf())};
d.bM=function(){return this.gf().then(function(a){a&&this.zy();return a},null,this)};d.gf=function(){if(this.mm)return G(!1);this.mm=!0;chrome.tabs.onUpdated.removeListener(this.Vx);this.De&&(this.De.stop(),this.De=null);if(this.Ra)return this.AB().then(function(){this.Ra&&(this.Ra.stop(),this.Ra.mb(),this.yi.Ox(this.Ra.Za.id),this.Ra=null);this.mm=!1;return!0},function(a){C(this.o,"Error cleaning up",a);this.mm=!1},this);this.mm=!1;return G(!1)};d.AB=function(){return G()};
d.bZ=function(a,b,c){this.Ra&&this.Ra.tabId&&this.Ra.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.Ra.KM(c),this.yi.gI(this.Ra.Za),this.Ra.$y())};d.BQ=function(a,b){a.captureAudio&&b.Mc&&!b.Mc.getAudioTracks().length&&this.yi.zf().send(new Zg(vh,"notification","dismiss"))};var xh=function(a){se.call(this);this.Za=a;this.ir=!1;this.tabId=this.Jy=this.iconUrl=null};w(xh,se);d=xh.prototype;d.VK=function(a,b,c){this.Za.description=a;this.ir||this.Za.offTheRecord?this.iconUrl=this.Jy=null:(this.Jy=b,this.iconUrl=c)};d.$y=function(){this.ir||this.Za.offTheRecord||this.ZJ()};d.Jba=function(a){this.tabId=a;return uh(a).then(this.KM.bind(this))};
d.KM=function(a){this.ir=a.incognito;this.VK(a.title,Ea(a.url,"file://")?"Local content (Tab)":ef(a.url.match(df)[3]||null,!0)+" (Tab)",a.favIconUrl)};d.T9=function(a){this.Za=a};d.ZJ=p;d.gM=function(){return!1};d.L=function(){this.stop()};var yh=function(a,b){this.type=a;this.data=b},zh=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new yh(a.type,a.data)},Ah=function(a,b,c,e){this.description=a;this.settings=b||null;this.mediaConstraints=c||null;this.presentationUrl=e||null};var Bh={OA:0,DA:1},Ch=function(a){ih("MediaRouter.WebRtc.Start.Success",a,Bh)};var Eh=function(a,b){se.call(this);this.a=Nd("cv2.PeerConnection");this.r0=Dh;this.m=this.mR(b);this.Wu=this.gR(a);this.mS=!0;this.eK=I();this.cz=!1;this.Mr=0;this.cr=null;this.OG=this.Hx=0;this.Ab=!1;this.ZH=this.$H=this.Kx=this.hI=this.g1=p};w(Eh,se);var Dh={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},Fh={mandatory:{IceRestart:!0,OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};d=Eh.prototype;d.cL=function(a){this.Kx=a};d.bL=function(a){this.$H=a};d.aL=function(a){this.ZH=a};
d.eL=function(a){this.hI=a};d.dL=function(a){this.Wu.onmessage=function(b){a(b.data)}};d.lr=function(){return this.Ab};d.FW=function(a){var b={};b.iceServers=[{url:"stun:stun.l.google.com:19302"}].concat(a);return b};d.mR=function(a){a=this.FW(a);var b=new webkitRTCPeerConnection(a);b.onicecandidate=t(this.Mx,this);b.Gna=t(this.B1,this);b.oniceconnectionstatechange=t(this.A1,this);E(this.a,"Created webkitRTCPeerConnnection with config: "+JSON.stringify(a));return b};
d.gR=function(a){return this.m.createDataChannel(a,{reliable:!1})};d.w6=function(a){"string"==typeof a?this.Wu.send(a):this.Wu.send(JSON.stringify(a))};d.start=function(){this.Ab||(this.Ab=!0,this.sm())};d.stop=function(){E(this.a,"Stopping peer connection...");this.Ab&&(this.Ab=!1,"closed"!=this.m.signalingState&&this.m.close())};d.addStream=function(a){this.m.addStream(a)};d.removeStream=function(a){this.Ab&&this.m.removeStream(a)};d.L=function(){this.stop();this.m=null};
d.sm=function(){E(this.a,"Sending offer to peer.");var a=this;this.Hx=u();this.m.createOffer(t(this.OK,this),function(b){D(a.a,"Error creating offer: "+JSON.stringify(b))},this.r0);this.eK.promise.then(function(b){a.hI(b)})};d.OK=function(a){E(this.a,"Setting local description: "+JSON.stringify(a));var b=this;this.m.setLocalDescription(a,function(){E(b.a,"Local description set successfully")},function(a){D(b.a,"Error setting local description: "+JSON.stringify(a))})};
d.bT=function(a){return{type:a.type,sdp:a.sdp}};d.setRemoteDescription=function(a){F(this.a,"<===: "+JSON.stringify(a));a=new RTCSessionDescription(a);E(this.a,"Setting remote description: "+JSON.stringify(a));var b=this;this.m.setRemoteDescription(a,function(){E(b.a,"Remote description set successfully.")},function(a){D(b.a,"Error setting remote description: "+JSON.stringify(a))})};
d.Mx=function(a){var b=this;a.candidate?(this.Mr++,this.OG=u(),1==this.Mr?this.cr=af(function(){E(b.a,"ICE candidate gathering timed out.");b.cr=null;b.Sy()},5E3):this.cz&&D(this.a,"Received ICE candidate after resolving session description.")):(E(this.a,"End of ICE candidates."),bh("MediaRouter.WebRtc.IceCandidateGathering.Duration.Reported",u()-this.Hx),this.Sy(),0<this.Mr&&bh("MediaRouter.WebRtc.IceCandidateGathering.Duration.Real",this.OG-this.Hx))};
d.B1=function(){"completed"==this.m.iceGatheringState&&this.Sy()};d.Sy=function(){bf(this.cr);this.cr=null;this.cz||(E(this.a,"Resolving sesion description after gathering "+this.Mr+" ICE candidates."),this.eK.resolve(this.bT(this.m.localDescription)),this.cz=!0)};
d.A1=function(a){if(this.m){var b=this.m.iceConnectionState;E(this.a,"New ICE connection state: "+b+".");if("connected"==b)this.Kx("iceconnected");else if("completed"==b)this.Kx("icecompleted");else if("failed"==b)D(this.a,"Ice connection failed: "+JSON.stringify(a)),this.$H("icefailed");else if("closed"==b)this.ZH("iceclosed");else if("disconnected"==b)if(D(this.a,"Ice connection state is bad."),this.mS&&this.lr()){E(this.a,"Restarting ICE.");var c=this;this.m.createOffer(t(this.OK,this),function(a){D(c.a,
"Error creating new offer: "+JSON.stringify(a))},Fh)}else this.g1()}};var Gh=function(a){this.M6=a};Gh.prototype.Rk=function(){return G(this.M6)};var Hh=function(a,b){this.width=a;this.height=b};d=Hh.prototype;d.clone=function(){return new Hh(this.width,this.height)};d.toString=function(){return"("+this.width+" x "+this.height+")"};d.pP=function(){return this.width*this.height};d.Gb=function(){return!this.pP()};d.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};d.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
d.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};d.scale=function(a,b){b=r(b)?b:a;this.width*=a;this.height*=b;return this};var Ih=!Vc&&!Tc||Tc&&9<=Number(qd)||Vc&&od("1.9.1");Tc&&od("9");var Kh=function(a,b){Gb(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:Jh.hasOwnProperty(e)?a.setAttribute(Jh[e],b):Ea(e,"aria-")||Ea(e,"data-")?a.setAttribute(e,b):a[e]=b})},Jh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Lh=function(a){return a?a.parentWindow||a.defaultView:
window},Nh=function(a,b,c,e){function f(c){c&&b.appendChild(q(c)?a.createTextNode(c):c)}for(;e<c.length;e++){var g=c[e];!va(g)||xa(g)&&0<g.nodeType?f(g):x(Mh(g)?ub(g):g,f)}},Oh=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},Ph=function(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(var c;c=a.firstChild;)a.removeChild(c);
a.appendChild((9==a.nodeType?a:a.ownerDocument||a.document).createTextNode(String(b)))}},Mh=function(a){if(a&&"number"==typeof a.length){if(xa(a))return"function"==typeof a.item||"string"==typeof a.item;if(wa(a))return"function"==typeof a.item}return!1},Qh=function(a){this.Bm=a||h.document||document};d=Qh.prototype;d.getElementsByTagName=function(a,b){return(b||this.Bm).getElementsByTagName(a)};d.setProperties=Kh;d.createElement=function(a){return this.Bm.createElement(String(a))};
d.createTextNode=function(a){return this.Bm.createTextNode(String(a))};d.getWindow=function(){var a=this.Bm;return a.parentWindow||a.defaultView};d.appendChild=function(a,b){a.appendChild(b)};d.append=function(a,b){Nh(9==a.nodeType?a:a.ownerDocument||a.document,a,arguments,1)};d.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
d.removeNode=Oh;d.getChildren=function(a){return Ih&&void 0!=a.children?a.children:eb(a.childNodes,function(a){return 1==a.nodeType})};d.isElement=function(a){return xa(a)&&1==a.nodeType};d.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var Rh=function(a,b){this.ws=[];this.WH=a;this.DC=b||null;this.gn=this.ic=!1;this.Sf=void 0;this.Mz=this.vP=this.nu=!1;this.nt=0;this.Jb=null;this.Ap=0};d=Rh.prototype;d.cancel=function(a){if(this.ic)this.Sf instanceof Rh&&this.Sf.cancel();else{if(this.Jb){var b=this.Jb;delete this.Jb;a?b.cancel(a):b.xP()}this.WH?this.WH.call(this.DC,this):this.Mz=!0;this.ic||this.za(new Sh(this))}};d.xP=function(){this.Ap--;0>=this.Ap&&this.cancel()};d.uC=function(a,b){this.nu=!1;this.iA(a,b)};
d.iA=function(a,b){this.ic=!0;this.Sf=b;this.gn=!a;this.rD()};d.UB=function(){if(this.ic){if(!this.Mz)throw new Th(this);this.Mz=!1}};d.callback=function(a){this.UB();this.iA(!0,a)};d.za=function(a){this.UB();this.iA(!1,a)};d.oa=function(a,b){return this.vh(a,null,b)};d.wc=function(a,b){return this.vh(null,a,b)};d.PO=function(a,b){return this.vh(a,a,b)};d.vh=function(a,b,c){this.ws.push([a,b,c]);this.ic&&this.rD();return this};
d.then=function(a,b,c){var e,f,g=new fe(function(a,b){e=a;f=b});this.vh(e,function(a){a instanceof Sh?g.cancel():f(a)});return g.then(a,b,c)};ce(Rh);d=Rh.prototype;d.Du=function(a){this.vh(a.callback,a.za,a);return this};d.wB=function(a){return a instanceof Rh?this.oa(t(a.qu,a)):this.oa(function(){return a})};d.qu=function(a){var b=new Rh;this.Du(b);a&&(b.Jb=this,this.Ap++);return b};d.f_=function(a){return a instanceof Error};d.QF=function(){return gb(this.ws,function(a){return wa(a[1])})};
d.rD=function(){if(this.nt&&this.ic&&this.QF()){var a=this.nt,b=Uh[a];b&&(b.L5(),delete Uh[a]);this.nt=0}this.Jb&&(this.Jb.Ap--,delete this.Jb);for(var a=this.Sf,c=b=!1;this.ws.length&&!this.nu;){var e=this.ws.shift(),f=e[0],g=e[1],e=e[2];if(f=this.gn?g:f)try{var k=f.call(e||this.DC,a);l(k)&&(this.gn=this.gn&&(k==a||this.f_(k)),this.Sf=a=k);if(de(a)||"function"===typeof h.Promise&&a instanceof h.Promise)this.nu=c=!0}catch(n){a=n,this.gn=!0,this.QF()||(b=!0)}}this.Sf=a;c&&(k=t(this.uC,this,!0),c=t(this.uC,
this,!1),a instanceof Rh?(a.vh(k,c),a.vP=!0):a.then(k,c));b&&(a=new Vh(a),Uh[a.Tb]=a,this.nt=a.Tb)};var Wh=function(a){var b=new Rh;b.callback(a);return b},Xh=function(a){var b=new Rh;b.za(a);return b},Th=function(){Da.call(this)};w(Th,Da);Th.prototype.message="Deferred has already fired";Th.prototype.name="AlreadyCalledError";var Sh=function(){Da.call(this)};w(Sh,Da);Sh.prototype.message="Deferred was canceled";Sh.prototype.name="CanceledError";
var Vh=function(a){this.Tb=h.setTimeout(t(this.Waa,this),0);this.bd=a};Vh.prototype.Waa=function(){delete Uh[this.Tb];throw this.bd;};Vh.prototype.L5=function(){h.clearTimeout(this.Tb)};var Uh={};var bi=function(a,b){var c=b||{};b=c.document||document;var e=document.createElement("SCRIPT"),f={TJ:e,Ko:void 0},g=new Rh(Yh,f),k=null,n=null!=c.timeout?c.timeout:5E3;0<n&&(k=window.setTimeout(function(){Zh(e,!0);g.za(new $h(1,"Timeout reached for loading script "+a))},n),f.Ko=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Zh(e,c.Uha||!1,k),g.callback(null))};e.onerror=function(){Zh(e,!0,k);g.za(new $h(0,"Error while loading script "+
a))};f=c.attributes||{};Tb(f,{type:"text/javascript",charset:"UTF-8",src:a});Kh(e,f);ai(b).appendChild(e);return g},ai=function(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement},Yh=function(){if(this&&this.TJ){var a=this.TJ;a&&"SCRIPT"==a.tagName&&Zh(a,!0,this.Ko)}},Zh=function(a,b,c){null!=c&&h.clearTimeout(c);a.onload=p;a.onerror=p;a.onreadystatechange=p;b&&window.setTimeout(function(){Oh(a)},0)},$h=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+
b);Da.call(this,c);this.code=a};w($h,Da);var ci=function(){this.Pb=this.yi=this.Xq=null;this.tx=I()};ra(ci);d=ci.prototype;d.Rk=function(){if(this.Xq)return G(this.Xq);this.W_().then(null,function(){this.tx.reject(Error("Failed to load hangouts mirroring script."))},this);return this.tx.promise};d.q8=function(a){this.Pb=a};d.U8=function(a){this.yi=a};d.lJ=function(a){this.yi&&(this.Xq=a(this.Pb,this.yi),this.tx.resolve(this.Xq))};d.W_=function(){var a=chrome.extension.getURL("mirroring_hangouts.js");return bi(a)};var di="undefined"!=typeof chrome&&!!chrome.networkingPrivate&&!!chrome.networkingPrivate.setWifiTDLSEnabledState&&lh(),ei=lh()||ad;var gi=function(){this.maxWidth=1920;this.maxHeight=1080;this.minWidth=320;this.minHeight=180;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=128;this.maxLatencyMillis=800;this.animatedLatencyMillis=this.minLatencyMillis=400;this.dscpEnabled=$c||bd||lh()||mh();this.enableLogging=!0;this.useTdls=!1;this.captureAudio=this.captureVideo=!0;this.a=B("mr.mirror.Settings");var a=window.localStorage?window.localStorage.getItem(fi):null;if(q(a))try{var b=JSON.parse(a);
b&&(this.NM(b),D(this.a,"Initial mr.mirror.Settings overridden to: "+this.Yz()))}catch(c){throw C(this.a,fi+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',c),Error("Overrides not parseable.  See ERROR log for details.");}},fi="mr.mirror.Settings.Overrides";d=gi.prototype;d.clone=function(){var a=new gi;a.NM(this);return a};d.Yz=function(){return JSON.stringify(this,function(a,b){if(0==a.length||"boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b})};
d.NM=function(a){for(var b in this){var c=a[b];if(null!=c){var e=this[b];"boolean"!=typeof e&&"number"!=typeof e&&"string"!=typeof e||typeof e!=typeof c||(this[b]=c)}}};
d.GQ=function(){var a=screen.width,b=screen.height;this.maxHeight*a<this.maxWidth*b?(a=Math.min(this.maxWidth,a),a-=a%160,b=90*a/160):(b=Math.min(this.maxHeight,b),b-=b%90,a=160*b/90);if(a<Math.max(160,this.minWidth)||b<Math.max(90,this.minHeight))a=Math.max(160,this.minWidth),b=Math.max(90,this.minHeight);this.maxWidth=a;this.maxHeight=b};d.OR=function(){this.minHeight=this.minWidth=0};
var hi=function(a,b){var c=new gi;c.captureAudio=a;c.captureVideo=b;c.GQ();E(c.a,"mr.mirror.Settings after screen size adjustments: "+c.Yz());return c};gi.prototype.gW=function(){return String(this.minWidth+"x"+this.minHeight)};gi.prototype.LV=function(){return String(this.maxWidth+"x"+this.maxHeight)};gi.prototype.iX=function(){return this.minWidth==this.maxWidth&&this.minHeight==this.maxHeight?"fixed":0<this.minWidth&&0<this.minHeight?"fixed-aspect-ratio":"variable"};var ii=function(a,b){this.Cu=a;this.Qb=b};ii.prototype.EG=function(){return"tab"==this.Cu};ii.prototype.oM=function(a){return this.EG()?this.cba():this.$aa(a)};ii.prototype.cba=function(){var a={audio:this.Qb.captureAudio,video:this.Qb.captureVideo};this.Qb.captureVideo&&(a.videoConstraints={mandatory:{minWidth:this.Qb.minWidth,minHeight:this.Qb.minHeight,maxWidth:this.Qb.maxWidth,maxHeight:this.Qb.maxHeight,maxFrameRate:this.Qb.maxFrameRate,enableAutoThrottling:!0}});return a};
ii.prototype.$aa=function(a){var b={audio:!1,video:!1};this.Qb.captureVideo&&(b.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,minWidth:this.Qb.minWidth,minHeight:this.Qb.minHeight,maxWidth:this.Qb.maxWidth,maxHeight:this.Qb.maxHeight,maxFrameRate:this.Qb.maxFrameRate}});ei&&this.Qb.captureAudio&&(b.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a}});return b};var ji=function(a,b){this.u0=a;this.Qb=b};d=ji.prototype;d.Af=function(){return this.Qb};d.Hv=function(){return this.Zw()?this.VX():this.tU()};d.Zw=function(){return qh(this.u0)};d.VX=function(){return new ii("tab",this.Qb)};d.tU=function(){return new ii("desktop",this.Qb)};var ki=function(a){se.call(this);this.A=a;this.Aa={}};w(ki,se);var li=[];d=ki.prototype;d.listen=function(a,b,c,e){return this.eH(a,b,c,e)};d.R_=function(a,b,c,e,f){return this.eH(a,b,c,e,f)};d.eH=function(a,b,c,e,f){ua(b)||(b&&(li[0]=b.toString()),b=li);for(var g=0;g<b.length;g++){var k=Ne(a,b[g],c||this.handleEvent,e||!1,f||this.A||this);if(!k)break;this.Aa[k.key]=k}return this};d.yn=function(a,b,c,e){return this.cH(a,b,c,e)};
d.cH=function(a,b,c,e,f){if(ua(b))for(var g=0;g<b.length;g++)this.cH(a,b[g],c,e,f);else{a=Ue(a,b,c||this.handleEvent,e,f||this.A||this);if(!a)return this;this.Aa[a.key]=a}return this};d.od=function(a,b,c,e,f){if(ua(b))for(var g=0;g<b.length;g++)this.od(a,b[g],c,e,f);else c=c||this.handleEvent,f=f||this.A||this,c=Oe(c),e=!!e,b=Fe(a)?a.Sm(b,c,e,f):a?(a=Qe(a))?a.Sm(b,c,e,f):null:null,b&&(We(b),delete this.Aa[b.key]);return this};
d.removeAll=function(){Gb(this.Aa,function(a,b){this.Aa.hasOwnProperty(b)&&We(a)},this);this.Aa={}};d.L=function(){ki.R.L.call(this);this.removeAll()};d.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var mi=function(a){this.al=0;this.Uk=a||100;this.cf=[]};d=mi.prototype;d.add=function(a){var b=this.cf[this.al];this.cf[this.al]=a;this.al=(this.al+1)%this.Uk;return b};d.get=function(a){a=this.PH(a);return this.cf[a]};d.set=function(a,b){a=this.PH(a);this.cf[a]=b};d.P=function(){return this.cf.length};d.Gb=function(){return 0==this.cf.length};d.clear=function(){this.al=this.cf.length=0};d.B=function(){return this.sW(this.P())};
d.sW=function(a){var b=this.P(),c=[];for(a=this.P()-a;a<b;a++)c.push(this.get(a));return c};d.ob=function(){for(var a=[],b=this.P(),c=0;c<b;c++)a[c]=c;return a};d.ab=function(a){return a<this.P()};d.Oj=function(a){for(var b=this.P(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};d.PH=function(a){if(a>=this.cf.length)throw Error("Out of bounds exception");return this.cf.length<this.Uk?a:(this.al+Number(a))%this.Uk};var ni=function(){this.nJ=u()},oi=new ni;ni.prototype.set=function(a){this.nJ=a};ni.prototype.reset=function(){this.set(u())};ni.prototype.get=function(){return this.nJ};var pi=function(a){this.W3=a||"";this.yaa=oi};d=pi.prototype;d.nB=!0;d.Kz=!0;d.Y$=!0;d.X$=!0;d.Ts=!1;d.Lz=!1;
var ri=function(a){a=new Date(a.lM);return qi(a.getFullYear()-2E3)+qi(a.getMonth()+1)+qi(a.getDate())+" "+qi(a.getHours())+":"+qi(a.getMinutes())+":"+qi(a.getSeconds())+"."+qi(Math.floor(a.getMilliseconds()/10))},qi=function(a){return 10>a?"0"+a:String(a)},si=function(a,b){a=(a.lM-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b},ti=function(a){pi.call(this,a)};w(ti,pi);
ti.prototype.vD=function(a){var b=[];b.push(this.W3," ");this.Kz&&b.push("[",ri(a),"] ");this.Y$&&b.push("[",si(a,this.yaa.get()),"s] ");this.X$&&b.push("[",a.nH,"] ");this.Lz&&b.push("[",a.ri.name,"] ");b.push(a.getMessage());this.Ts&&(a=a.gq)&&b.push("\n",a instanceof Error?a.message:a.toString());this.nB&&b.push("\n");return b.join("")};var ui=function(a){return(a=a.exec(ac))?a[1]:""},vi=function(){if(wf)return ui(/Firefox\/([0-9.]+)/);if(Tc||Uc||Sc)return ld;if(Af)return ui(/Chrome\/([0-9.]+)/);if(Bf&&!(Qc()||y("iPad")||y("iPod")))return ui(/Version\/([0-9.]+)/);if(xf||yf){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(ac);if(a)return a[1]+"."+a[2]}else if(zf)return(a=ui(/Android\s+([0-9.]+)/))?a:ui(/Version\/([0-9.]+)/);return""}();var wi=function(a,b,c,e,f,g,k,n){this.yd=null;this.cC=!1;this.bC=I();this.tc=[];this.xh=a?encodeURIComponent(String(a)):null;this.xD=null;!e&&b&&(this.xD=b);this.lP=c||null;this.tp=!e;this.$p=null!=f?f:null;this.Nr=g||null;this.Sba=!!k;this.yD=n||null};w(wi,se);var xi=new fc;xi.Tz="https://apis.google.com/js/client.js";var yi;xi instanceof fc&&xi.constructor===fc&&xi.sO===ec?yi=xi.Tz:($a("expected object of type Const, got '"+xi+"'"),yi="type_error:Const");var zi=new nc;zi.oy=yi;d=wi.prototype;
d.init=function(){var a=t(function(a){this.yd=a;var b=qa("client.request",a),f=qa("auth",a);b&&f?this.HF():a.load("client",t(this.HF,this))},this),b=this.mD("gapi");b?a(b.gapi):this.V_(a);return this.bC.promise};d.mD=function(a){for(var b=window,c=qa(a,b);!c&&b!=window.top&&this.jQ(b.parent,a);)b=b.parent,c=qa(a,b);return c?b:null};d.jQ=function(a,b){try{return!!a&&null!=a.location.href&&ve(a,b)}catch(c){return!1}};
d.V_=function(a){var b=this.mD("gapi_onload");if(b){var c=b.gapi_onload;b.gapi_onload=function(){c();a(b.gapi)}}else{window.gapi_onload=function(){a(window.gapi)};var e=document.createElement("script");e.src=oc(zi);this.yD&&Ph(e,Uf(this.yD));document.getElementsByTagName("head")[0].appendChild(e)}};d.HF=function(){for(var a=0;a<this.tc.length;a++)this.tc[a].wb.resolve(this.bK(this.tc[a].A5));this.cC=!0;this.bC.resolve(this.yd)};
d.sendRequest=function(a){if(this.cC)return this.bK(a);var b=I();this.tc.push({A5:a,wb:b});return b.promise};
d.bK=function(a){var b,c,e,f=qa("config.get",this.yd);this.tp||(b=f("googleapis.config/auth/useFirstPartyAuth"),c=f("googleapis.config/auth/useOriginToken"));null!=this.$p&&(e=f("client/cors"));try{var g=qa("config.update",this.yd);this.tp||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=this.$p&&g("client/cors",this.$p);var k=qa("client.request",this.yd),n=this.sT();a.headers&&Tb(n,a.headers);var v={headers:n,root:this.lP,path:a.path,method:a.method,
body:a.body},A=a.params||{};this.xh&&!this.Nr?Tb(A,{key:this.xh}):this.Nr&&Tb(A,{key:null});Nb(A)||(v.params=A);var M=G(k(v));a.callback&&M.then(function(b){a.callback.apply(null,[b.result,b])},function(b){a.callback.apply(null,[b.result,b])});return M}finally{g=qa("config.update",this.yd),this.tp||(g("googleapis.config/auth/useFirstPartyAuth",b),g("googleapis.config/auth/useOriginToken",c)),null!=this.$p&&g("client/cors",e)}};
d.sT=function(){if(this.tp){if(this.Nr)return{Authorization:"Bearer "+this.Nr};var a=qa("auth.getAuthHeaderValueForFirstParty",this.yd);return{Authorization:this.Sba?a([]):a(),"X-Goog-AuthUser":this.xD}}return{}};
